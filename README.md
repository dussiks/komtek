# Справочник Glos

Программа хранит информацию в виде справочников, имеющих версии и содержимые элементы и отдает запрашиваемые ресурсы через API.

## Требования

Python: 3.8, 3.9
Django: 2.2, 3.0, 3.1, 3.2
djangorestframework: 3.12

## Ограничения

Сторонним пользователям доступен только GET-метод. Создание новых объектов и их редактирование доступно администратору ресурса в стандартной админке Django.
При создании нового объекта "Справочник" по умолчанию создается первая его версия с именем "1.0.0", дата - текущий день. Имя и дату можно изменить.

## Использование

Структура моделей представлена следующим образом: 
1. Верхний уровень - справочник (модель Guide).
2. Второй уровень - версия спарвочника (модель GuideVersion).
3. Третий уровень - элемент версии справочника (модель Element).

Программа использует базоый путь для получения всех ресурсов:
api/v1/

### Ресурс Guide:
Для получения имеющихся справочников необходимо перейти по следующему пути:
```bash
api/v1/guides/  # выдаст все справочники с указанием имени последней версии каждого справочника.
```
```json
{
    "count": 2,
    "next": null,
    "previous": null,
    "results": [
        {
            "id": 1,
            "title": "biology",
            "description": "about biology",
            "start_date": "2021-04-01",
            "version": "1.0.0"
        },
        {
            "id": 2,
            "title": "mathematics",
            "description": "about algebra and geometry",
            "start_date": "2021-04-27",
            "version": "3.0.0"
        }
    ]
}
```

Для получения списка справочников, актуальных на указанную дату необходимо использовать параметр запроса ```search_date```. Формат ввода: "YYYY-mm-dd".
```shell
api/v1/guides/?search_date=2021-04-27
```
При некорректном вводе имени параметра (search_date) или неверном формате даты пользователь получит соответствующее сообщение об ошибке.
Вывод найденных справочников сопровождается информацией о версии. Если поля версии "Null", значит нет актуальной версии справочника на введенную дату. В примере ниже для справочника с id=4 нет актуальной версии на запрошенную дату.
```json
"next": null,
    "previous": null,
    "results": [
        {
            "id": 1,
            "title": "biology",
            "description": "about biology",
            "version": "1.0.0",
            "start_date": "2021-04-01"
        },
        {
            "id": 4,
            "title": "history",
            "description": "about history",
            "version": null,
            "start_date": null
        },
        {
            "id": 2,
            "title": "mathematics",
            "description": "about algebra and geometry",
            "version": "3.0.0",
            "start_date": "2021-04-27"
        }
    ]
}
```


Для выбора определенного справочника необходимо перейти по следующему пути:
```bash
api/v1/guides/2/  # выдаст справочник с id=2 (id - уникальный номер справочника).
```

```json
{
    "id": 2,
    "title": "mathematics",
    "description": "about algebra and geometry",
    "start_date": "2021-04-27",
    "version": "3.0.0"
}
```

### Ресурс Guide Version
Для получения всех версий заданного справочника необходимо перейти по следующему пути:
```bash
api/v1/guides/2/versions/  # покажет все версии справочника с id=2.
```

```json
{
    "count": 3,
    "next": null,
    "previous": null,
    "results": [
        {
            "id": 3,
            "name": "1.0.0",
            "date_from": "2021-04-28",
            "guide": "math",
            "guide_unique": "2"
        },
        {
            "id": 4,
            "name": "2.0.0",
            "date_from": "2021-04-11",
            "guide": "math",
            "guide_unique": "2"
        },
        {
            "id": 6,
            "name": "3.0.0",
            "date_from": "2021-04-27",
            "guide": "math",
            "guide_unique": "2"
        }
    ]
}
```

Для выбора определенного справочника необходимо перейти по следующему пути:
```bash
api/v1/guides/2/versions/6/  # покажет версию с id=6 справочника с id=2.
```

```json
{
    "id": 6,
    "name": "3.0.0",
    "date_from": "2021-04-27",
    "guide": "math",
    "guide_unique": "2"
}
```

### Ресурс Element
Для получения всех элементов определенной версии справочника необходимо перейти по пути:
```bash
api/v1/guides/2/versions/6/elements/  # покажет все элементы версии id=6 справочника с id=2.
```

```json
{
    "count": 2,
    "next": null,
    "previous": null,
    "results": [
        {
            "code": "0609",
            "value": "tg"
        },
        {
            "code": "0610",
            "value": "ctg"
        }
    ]
}
```
